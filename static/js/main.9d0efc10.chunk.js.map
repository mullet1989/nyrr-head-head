{"version":3,"sources":["components/search.js","components/participant.js","App.js","serviceWorker.js","index.js"],"names":["AthleteSelect","debounced","onClick","onFocusIn","onFocusOut","isOpen","useState","results","setResults","athleteName","setAthleteName","optionsAsync","query","a","fetch","JSON","stringify","json","r","response","items","style","border","borderRadius","position","background","zIndex","type","value","marginBottom","fontSize","onFocus","onBlur","onChange","e","target","persist","debounce","searchString","width","marginTop","map","i","className","key","onMouseDown","x","firstName","lastName","runnerId","racesCount","Participant","setParticipantRaces","setRaces","setIsOpen","nameClickHandler","athleteId","rs","App","p1Races","setp1Races","p2Races","setp2Races","bothRaced","setBothRaced","p1","p2","useEffect","length","commonRaces","p2RaceCodes","eventCode","race","idx","indexOf","textAlign","padding","borderLeft","backgroundColor","Object","keys","entries","k","actualTime","fontWeight","color","eventName","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.9d0efc10.chunk.js","sourcesContent":["import React, { useState } from \"react\";\nimport { debounce } from \"lodash\";\n\nconst AthleteSelect = ({ onClick, onFocusIn, onFocusOut, isOpen }) => {\n\n  let [results, setResults] = useState([]);\n  let [athleteName, setAthleteName] = useState(\"\");\n\n  const optionsAsync = async query => {\n    const results = await fetch(\"https://results.nyrr.org/api/runners/search\", {\n      \"headers\": {\n        \"accept\": \"application/json, text/plain, */*\",\n        \"accept-language\": \"en-US,en;q=0.9\",\n        \"content-type\": \"application/json;charset=UTF-8\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"token\": \"6112c32703f442f0\",\n      },\n      \"referrer\": \"https://results.nyrr.org/home\",\n      \"referrerPolicy\": \"no-referrer-when-downgrade\",\n      \"body\": JSON.stringify({\n        \"searchString\": query,\n        \"pageIndex\": 1,\n        \"pageSize\": 5,\n        \"sortColumn\": null,\n        \"sortDescending\": false,\n      }),\n      \"method\": \"POST\",\n      \"mode\": \"cors\",\n    });\n\n    const r = await results.json();\n    setResults(r.response.items);\n  };\n\n  let debounced;\n\n  const onChange = e => {\n\n    setAthleteName(e.target.value);\n\n    /* signal to React not to nullify the event object */\n    e.persist();\n\n    if (!debounced) {\n      debounced = debounce(() => {\n        let searchString = e.target.value;\n        optionsAsync(searchString);\n      }, 300);\n    }\n    debounced();\n\n  };\n\n  return (\n    <div style={{ border: \"solid 1px\", borderRadius: \"5px\", position: \"relative\", background: \"white\", zIndex: \"100\" }}>\n      <input type=\"text\"\n             value={athleteName}\n             style={{ marginBottom: \"0\", fontSize: \"1.2em\", border: \"none\" }}\n             onFocus={onFocusIn}\n             onBlur={onFocusOut}\n             onChange={onChange}\n      />\n      <div style={{ position: \"absolute\", width: \"100%\", background: \"white\", marginTop: \"5px\" }}>\n        {isOpen && results.map((r, i) =>\n          <div className=\"box\"\n               key={i}\n               onMouseDown={x => {\n                 setAthleteName(`${r.firstName} ${r.lastName}`);\n                 onClick(r.runnerId);\n               }}>\n            {r.firstName} {r.lastName} - ({r.racesCount} races)\n          </div>)}\n      </div>\n    </div>);\n\n\n};\n\nexport default AthleteSelect;\n","import React, { useState } from \"react\";\nimport AthleteSearch from \"./search\";\nimport Grid from \"./results-grid\";\n\nconst Participant = ({ setParticipantRaces }) => {\n\n  let [races, setRaces] = useState([]);\n  let [isOpen, setIsOpen] = useState(true);\n\n  const nameClickHandler = async athleteId => {\n    setIsOpen(false);\n    const response = await fetch(\"https://results.nyrr.org/api/runners/races\", {\n      \"headers\": {\n        \"accept\": \"application/json, text/plain, */*\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json;charset=UTF-8\",\n        \"pragma\": \"no-cache\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"token\": \"6112c32703f442f0\",\n      },\n      \"referrer\": \"https://results.nyrr.org/home\",\n      \"referrerPolicy\": \"no-referrer-when-downgrade\",\n      \"body\": JSON.stringify({\n        \"runnerId\": athleteId,\n        \"searchString\": null,\n        \"year\": null,\n        \"distance\": null,\n        \"pageIndex\": 1,\n        \"pageSize\": 51,\n        \"sortColumn\": \"EventDate\",\n        \"sortDescending\": true,\n      }),\n      \"method\": \"POST\",\n      \"mode\": \"cors\",\n    });\n    const rs = await response.json();\n    setRaces(rs.response.items);\n    setParticipantRaces(rs.response.items);\n\n\n  };\n\n  return (\n    <>\n      <AthleteSearch\n        onFocusOut={e => setIsOpen(false)}\n        onFocusIn={e => setIsOpen(true)}\n        onClick={nameClickHandler}\n        isOpen={isOpen}\n      />\n\n\n      {/*<Grid races={races}/>*/}\n    </>);\n};\n\nexport default Participant;","import React, { useEffect, useState } from \"react\";\nimport \"milligram\";\nimport \"./App.css\";\nimport Participant from \"./components/participant\";\n\nfunction App() {\n\n  let [p1Races, setp1Races] = useState([]);\n  let [p2Races, setp2Races] = useState([]);\n\n  let [bothRaced, setBothRaced] = useState({});\n\n  const setRaces = (p1, p2) => {\n    p1 && setp1Races(p1);\n    p2 && setp2Races(p2);\n  };\n\n  useEffect(() => {\n\n    if (p1Races.length && p2Races.length) {\n      const commonRaces = {};\n      const p2RaceCodes = p2Races.map(x => x.eventCode);\n      for (let race of p1Races) {\n        const idx = p2RaceCodes.indexOf(race.eventCode);\n        if (idx > -1) {\n          commonRaces[race.eventCode] = [race, p2Races[idx]];\n        }\n      }\n      setBothRaced({ ...commonRaces });\n    }\n\n  }, [p1Races, p2Races]);\n\n  const headToHead = () => {\n    if (Object.keys(bothRaced).length) {\n      return (\n        <div className=\"row\">\n          <div className=\"column\"/>\n          <div className=\"column\"/>\n          <div className=\"column\"/>\n        </div>\n      );\n    }\n    return \"\";\n  };\n\n  return (\n    <div className=\"container\">\n\n      <div className=\"row\">\n        <div className=\"column\" style={{ marginTop: \"10px\" }}>\n          <h1 style={{ textAlign: \"center\" }}>NYRR HEAD TO HEAD</h1>\n          <div style={{ padding: \"10px\", borderLeft: \".3rem solid #9b4dca\", backgroundColor: \"#f4f5f6\" }}>\n            <span>search two athletes to compare their results in nyrr history</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"column\">\n          <h4 style={{ textAlign: \"left\", marginTop: \"2rem\" }}>RED CORNER 🥊</h4>\n          <Participant setParticipantRaces={x => setRaces(x, null)}/>\n        </div>\n\n        <div className=\"column\">\n          <h4 style={{ textAlign: \"right\", marginTop: \"2rem\" }}>BLUE CORNER</h4>\n          <Participant setParticipantRaces={x => setRaces(null, x)}/>\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"column\" style={{ textAlign: \"center\" }}>\n          {headToHead()}\n          {bothRaced && Object.keys(bothRaced).length ? Object.entries(bothRaced).map(([k, v]) => {\n              return (\n                <div className=\"row flex flex-middle\" style={{ marginTop: \"10px\", marginBottom: \"10px\" }} key={k}>\n                  <div\n                    style={{\n                      backgroundColor: bothRaced[k][0].actualTime < bothRaced[k][1].actualTime ? \"darkseagreen\" : \"lightcoral\",\n                      fontWeight: \"bold\",\n                      borderRadius: \"25px\",\n                      color: \"black\",\n                    }}\n                    className=\"column\">{bothRaced[k][0].actualTime}</div>\n                  <div className=\"column\">{bothRaced[k][0].eventName}</div>\n                  <div\n                    style={{\n                      backgroundColor: bothRaced[k][0].actualTime >= bothRaced[k][1].actualTime ? \"darkseagreen\" : \"lightcoral\",\n                      fontWeight: \"bold\",\n                      borderRadius: \"25px\",\n                      color: \"black\",\n                    }}\n                    className=\"column\">{bothRaced[k][1].actualTime}</div>\n                </div>\n              );\n            })\n            : bothRaced && p1Races.length && p2Races.length ?\n              <div>sorry, no races in common 😥</div>\n              : <div/>\n          }\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}